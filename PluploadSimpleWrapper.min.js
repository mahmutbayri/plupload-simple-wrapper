/*!
* Plupload Simple Wrapper
* https://github.com/kalimba/plupload-simple-wrapper
*
* Released under the MIT license
*/
(function(b){var a=function(){var e="";var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var d=0;d<5;d++){e+=c.charAt(Math.floor(Math.random()*c.length))}return e};b.PluploadSimpleWrapper=function(g,m){var e={browseButtonText:"Browse File",progressInfo:null};var i=this;i.settings={};var l=b(g),c=a();i.settings=b.extend({},e,m);var f=b('<div id="plupload_console_'+c+'"></div>');var d=b('<span  id="plupload_browse_'+c+'">'+i.settings.browseButtonText+"</span>");l.html(f);l.append(d);var k=function(n){f.html(n);setTimeout(function(){f.empty()},2000)};var j={runtimes:"html5",container:l.get(0),browse_button:d.get(0),url:i.settings.url,multi_selection:false,filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg"}]},init:{PostInit:function(n){},BeforeUpload:function(n,o){if(b.isFunction(i.settings.progressInfo)){i.settings.progressInfo(n,o)}},FilesAdded:function(n,o){if(n.files.length==2){n.removeFile(n.files[0])}b.each(o,function(q,p){f.html(p.name+" ("+plupload.formatSize(p.size)+") <b></b>")});n.refresh();n.start()},UploadComplete:function(n){k("Completed")},UploadProgress:function(n,o){if(b.isFunction(i.settings.progressInfo)){i.settings.progressInfo(n,o);return}f.find("b").html(o.percent+"%")},StateChanged:function(n){if(n.state==plupload.STARTED){d.hide()}else{if(n.state==plupload.STOPPED){d.show()}}},Error:function(n,o){k(o.message)}}};var h=new plupload.Uploader(j);h.init();i.uploader=h};b.fn.PluploadSimpleWrapper=function(c){return this.each(function(){if(undefined==b(this).data("uploaderWrapper")){var d=new b.PluploadSimpleWrapper(this,c);b(this).data("PluploadSimpleWrapper",d)}})}}(jQuery));